<div *ngIf="couponPass !== null" class="container">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <div class="card mx-4" style="padding: 5px">
        <img src="{{URLstring}}" alt="" class="">
        <div class="card-body p-4">
          <h3 class="card-title">{{couponPass.title}}</h3>
          <!--
          <div id="yourImage"></div>
          <label class="col-sm-2 col-form-label">Title</label>
          <label class="col-sm-10" type="text">{{couponPass.title}}</label>
          -->

          <div class="coupon-price">{{formatPrice(couponPass.price)}}</div>
          <div class="coupon-cart" *ngIf="inCart" (click)="viewCart()">
            <i class="fas fa-cart-arrow-down" ></i>
          </div>
          <p class="card-text">{{couponPass.description}}</p>
          <p *ngIf="couponPass.quantity > 10" class="card-text"> Availability:  <i style="color:#19ff26"> Available</i> </p>
          <p *ngIf="couponPass.quantity > 4 && couponPass.quantity < 10" class="card-text"> Availability: <i style="color:#ffd51c"> Available, in exhaustion</i></p>
          <p *ngIf="couponPass.quantity > 0 && couponPass.quantity < 5" class="card-text"> Availability: <i style="color:#FF0000"> Only {{couponPass.quantity}} units available </i></p>
          <p *ngIf="couponPass.quantity < 1" class="card-text"> Availability: <i style="color:rgba(55,87,85,0.15)"> Not available</i></p>
          <p class="card-text">
            <i class="fas fa-fw  fa-clock text-secondary"></i> {{formatUntil(couponPass.valid_until)}}

            <br/>

            <span *ngIf="couponPass.constraints">
              <i class="fas fa-fw fa-map-marker-alt text-secondary"></i> {{couponPass.constraints}}
            </span>
          </p>

          <button class="col-sm-5 btn btn-danger" (click)="retry()">Back to shopping</button>
          <button *ngIf="!inCart && !inPurchased" class="col-sm-5 offset-sm-2 btn btn-success" (click)="openModal(template)">Add to cart</button>
          <button *ngIf="inCart || inPurchased" class="col-sm-5 offset-sm-2 btn btn-success" (click)="viewCart()">Go to cart</button>

          <ng-template #template>
            <div class="modal-header">
              <h4 class="modal-title pull-left">Add to cart</h4>
              <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>

            <div class="modal-body">
              <p>Confirm add to cart Coupon?</p>
              <!--<p>Quantity:-->
              <!--<input type="number"></p>-->


              <form>
                <div class="form-group">
                  <label for="formControlRange">Quantity: Max {{couponPass.quantity}}</label>
                  <input  type="range" min="1" max="{{couponPass.quantity}}" value="1" class="form-control-range" id="formControlRange" (input)="setQuantity($event.target.value)">
                  <label>Selected: {{quantity}}</label>
                </div>
              </form>


            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-danger" (click)="decline()">No</button>
              <button type="button" class="btn btn-success" (click)="addToCart(couponPass.id)">Yes</button>
            </div>
          </ng-template>


        </div>

      </div>


    </div>
  </div>
</div>
